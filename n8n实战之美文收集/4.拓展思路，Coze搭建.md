å°†è¿™å¥—ã€Šç¾æ–‡æ”¶é›†æ ‡å‡†æµç¨‹ã€‹éƒ¨ç½²åˆ° **Coze (æ‰£å­)** å¹³å°æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„æƒ³æ³•ã€‚Coze çš„ä¼˜åŠ¿åœ¨äº**å¤§æ¨¡å‹çš„è¯­ä¹‰ç†è§£èƒ½åŠ›æ›´å¼º**ï¼Œä¸”é›†æˆäº†éå¸¸å¤šç°æˆçš„æ’ä»¶ï¼ˆPluginsï¼‰ï¼Œè¿™èƒ½æå¤§é™ä½ä½ å†™ä»£ç çš„å·¥ä½œé‡ã€‚

ä½†æ ¸å¿ƒé€»è¾‘éœ€è¦è½¬æ¢ï¼š**n8n æ˜¯â€œæµç¨‹è‡ªåŠ¨åŒ–å·¥å…·â€ï¼Œè€Œ Coze æ˜¯â€œAI Agent æ­å»ºå¹³å°â€**ã€‚

æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šCoze æ˜¯çº¯äº‘ç«¯ç¯å¢ƒï¼Œå®ƒæ— æ³•ç›´æ¥è¯»å†™ä½ æœ¬åœ° NAS çš„ç¡¬ç›˜ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ GitHub ä½œä¸ºâ€œä¸­è½¬ç«™â€ã€‚

---

### ğŸ›ï¸ æ ¸å¿ƒæ¶æ„ï¼šCoze ç‰ˆâ€œäº‘ç«¯æ”¶å½•â€æ–¹æ¡ˆ

1. **å¤§è„‘ (Coze Workflow)**ï¼šè´Ÿè´£æ€è€ƒã€æœç´¢ã€éªŒè¯ã€æ’ç‰ˆã€‚
    
2. **å­˜å‚¨ (GitHub)**ï¼šä½œä¸ºäº‘ç«¯ç¡¬ç›˜ã€‚Coze è¯»å†™ GitHub ä»“åº“ã€‚
    
3. **åŒæ­¥ (Obsidian Git)**ï¼šä½ çš„ NAS ä¸Šçš„ Obsidian å®‰è£… Git æ’ä»¶ï¼Œè‡ªåŠ¨æŠŠ Coze å†™å¥½çš„æ–‡ç« æ‹‰å›æœ¬åœ°ã€‚
    

---

### ğŸ› ï¸ Coze éƒ¨ç½²å››æ­¥èµ°

æˆ‘ä»¬éœ€è¦åˆ©ç”¨ Coze çš„ **Workflow (å·¥ä½œæµ)** åŠŸèƒ½æ¥å¤åˆ»é‚£ 8 ä¸ªæ­¥éª¤ã€‚ä¸è¦æŠŠæ‰€æœ‰é€»è¾‘å†™åœ¨ä¸€ä¸ª Prompt é‡Œï¼Œè¦æ‹†æˆèŠ‚ç‚¹ã€‚

#### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ’ä»¶ (Plugins)

åœ¨ Coze çš„æ’ä»¶å¸‚åœºæ·»åŠ ä»¥ä¸‹ 3 ä¸ªæ ¸å¿ƒæ’ä»¶ï¼š

1. **GitHub**ï¼šç”¨äºè¯»å†™æ–‡ä»¶ï¼ˆæ ¸å¿ƒï¼‰ã€‚
    
    - ä½ éœ€è¦æˆæƒä½ çš„ GitHub è´¦å·ã€‚
        
2. **Browser (æˆ– Bing Search)**ï¼šç”¨äº Step 3 æœç´¢åŸæ–‡ã€‚
    
3. **Time**ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºè·å–å½“å‰æ—¥æœŸï¼Œå†™åœ¨ YAML é‡Œã€‚
    

#### ç¬¬äºŒæ­¥ï¼šæ­å»º Workflow (å¯è§†åŒ–å·¥ä½œæµ)

åˆ›å»ºä¸€ä¸ªæ–°çš„ Workflowï¼Œå‘½åä¸º `prose_collection_flow`ã€‚æŒ‰ç…§ä»¥ä¸‹èŠ‚ç‚¹é¡ºåºæ‹–æ‹½è¿æ¥ï¼š

**1. Start Node (å¼€å§‹)**

- è¾“å…¥å˜é‡ï¼š`level` (ä¾‹å¦‚ï¼šå°å­¦/åˆä¸­)ï¼Œ`topic` (å¯é€‰ï¼ŒæŒ‡å®šé¢˜ç›®)ã€‚
    

**2. GitHub Tool (è¯»å–ç´¢å¼•)**

- **ä½œç”¨**ï¼šStep 0 & 5 (æŸ¥é‡)ã€‚
    
- **æ–¹æ³•**ï¼š`getFile`ã€‚
    
- **å‚æ•°**ï¼š`owner`, `repo`, `path` (å¡« `ç¾æ–‡æ€»ç´¢å¼•.md` çš„è·¯å¾„)ã€‚
    
- **è¾“å‡º**ï¼šç´¢å¼•æ–‡ä»¶çš„å†…å®¹ã€‚
    

**3. LLM Node (ç­–åˆ’ä¸é€‰é¢˜)**

- **è¾“å…¥**ï¼š`level`ï¼Œ`index_content` (ä¸Šä¸€æ­¥çš„è¾“å‡º)ã€‚
    
- **Prompt**ï¼š
    
    > ä½ æ˜¯ä¸»ç¼–ã€‚é˜…è¯»ã€Šç¾æ–‡æ€»ç´¢å¼•ã€‹ï¼Œç»“åˆç”¨æˆ·è¯·æ±‚çš„çº§åˆ« `{{level}}`ã€‚
    > 
    > 1. æ£€æŸ¥ä»Šæ—¥æ˜¯å¦å·²è¾¾æ”¶å½•ä¸Šé™ã€‚
    >     
    > 2. è§„åˆ’ 1 ä¸ªå°šæœªæ”¶å½•çš„è¿‘ç°ä»£åå®¶æ•£æ–‡é¢˜ç›®ã€‚
    >     
    > 3. è¾“å‡º JSONï¼š{"title": "xxx", "author": "xxx"}ã€‚
    >     
    

**4. Browser/Search Tool (æœç´¢åŸæ–‡)**

- **ä½œç”¨**ï¼šStep 3 (æœç´¢)ã€‚
    
- **Query**ï¼š`{{LLM.output.title}} {{LLM.output.author}} å®Œæ•´ç‰ˆ åŸæ–‡`ã€‚
    
- **Loop (å¾ªç¯)**ï¼šCoze çš„å¾ªç¯æ¯”è¾ƒéš¾ç”¨ï¼Œå»ºè®®ç›´æ¥è®© Search æœç´¢å‰ 3 ä¸ªç»“æœã€‚
    

**5. Code Node (Python - ä¸‰æ­¥éªŒè¯æ³•)**

- **ä½œç”¨**ï¼šStep 3 (éªŒè¯)ã€‚
    
- **ä»£ç é€»è¾‘**ï¼šæŠŠ n8n é‚£æ®µ Python ä»£ç æ¬è¿‡æ¥ï¼Œç¨ä½œä¿®æ”¹ï¼ˆCoze çš„ Python èŠ‚ç‚¹ç¯å¢ƒå’Œ n8n ç•¥æœ‰ä¸åŒï¼Œä½†é€»è¾‘ä¸€è‡´ï¼‰ã€‚
    
- **è¾“å…¥**ï¼šæœç´¢åˆ°çš„ç½‘é¡µå†…å®¹ã€‚
    
- **è¾“å‡º**ï¼š`is_valid` (å¸ƒå°”å€¼), `clean_content` (æ¸…æ´—åçš„æ­£æ–‡)ã€‚
    

**6. LLM Node (æ’ç‰ˆä¸æ ¼å¼åŒ–)**

- **ä½œç”¨**ï¼šStep 4 & 7 (æ’ç‰ˆ)ã€‚
    
- **Prompt**ï¼š**â€œæ–‡ç« æ’ç‰ˆå·¥ç¨‹å¸ˆâ€** çš„æç¤ºè¯ã€‚
    
- **è¾“å…¥**ï¼š`clean_content`, `level`ã€‚
    
- **è¾“å‡º**ï¼šå®Œæ•´çš„ Markdown æ–‡æœ¬ï¼ˆå« YAML å’Œ Emojiï¼‰ã€‚
    

**7. GitHub Tool (å†™å…¥æ–‡ç« )**

- **ä½œç”¨**ï¼šStep 6 (ä¿å­˜)ã€‚
    
- **æ–¹æ³•**ï¼š`createOrUpdateFile`ã€‚
    
- **å‚æ•°**ï¼š
    
    - `path`: `{{level}}ç¾æ–‡/{{index}}.{{title}}-{{author}}.md`
        
    - `content`: `{{LLM_Formatter.output}}`
        
    - `message`: `feat: Coze auto-collect {{title}}`
        

**8. GitHub Tool (æ›´æ–°æ€»ç´¢å¼•)**

- **ä½œç”¨**ï¼šStep 8 (é“å¾‹)ã€‚
    
- **æ³¨æ„**ï¼šè¿™é‡Œéœ€è¦å†åŠ ä¸€ä¸ª LLM èŠ‚ç‚¹æ¥ç”Ÿæˆæ–°çš„ç´¢å¼•å†…å®¹ï¼Œæˆ–è€…ç”¨ Code èŠ‚ç‚¹åšå­—ç¬¦ä¸²æ‹¼æ¥ã€‚ç„¶åè°ƒç”¨ GitHub å·¥å…·æŠŠæ—§ç´¢å¼•è¦†ç›–æ‰ã€‚
    

**9. End Node (ç»“æŸ)**

- è¾“å‡ºï¼š`æ”¶å½•æˆåŠŸï¼š{{title}}ï¼Œå·²æ¨é€åˆ° GitHubã€‚`
    

---

### ğŸ’» å…³é”®ä»£ç ï¼šCoze é‡Œçš„ Python èŠ‚ç‚¹

åœ¨ Coze çš„ Code èŠ‚ç‚¹ä¸­ï¼Œä»£ç ç»“æ„å¦‚ä¸‹ï¼ˆç”¨äº Step 3 éªŒè¯ï¼‰ï¼š

Python

```
async def main(args: Args) -> Output:
    params = args.params
    search_content = params['search_result'] # ä»ä¸Šæ¸¸ Search èŠ‚ç‚¹è·å–
    
    # ä½ çš„éªŒè¯é€»è¾‘
    min_length = 300
    forbidden_keywords = ["æœ‰åˆ æ”¹", "èŠ‚é€‰", "è¯¾æ–‡ç‰ˆ"]
    
    # æ¨¡æ‹Ÿç®€å•çš„éªŒè¯
    if len(search_content) < min_length:
        return {"is_valid": False, "reason": "Too short"}
        
    for word in forbidden_keywords:
        if word in search_content:
            return {"is_valid": False, "reason": "Found forbidden word"}
            
    return {
        "is_valid": True, 
        "reason": "Pass", 
        "clean_content": search_content # è¿™é‡Œå¯ä»¥åŠ æ­£åˆ™æ¸…æ´—HTML
    }
```

### ğŸ¤– ç¬¬ä¸‰æ­¥ï¼šé…ç½® Bot (æ™ºèƒ½ä½“)

Workflow å»ºå¥½åï¼Œå‘å¸ƒå®ƒã€‚ç„¶åå›åˆ° Bot ç¼–æ’é¡µé¢ï¼š

1. **äººè®¾ä¸å›å¤é€»è¾‘**ï¼š
    
    Markdown
    
    ```
    ä½ æ˜¯ä¸€ä¸ªè‡ªåŠ¨ç¾æ–‡æ”¶å½•æœºå™¨äººã€‚
    å½“ç”¨æˆ·è¯´â€œå¼€å§‹æ”¶å½•â€æˆ–â€œä»Šå¤©çš„å°å­¦ç¾æ–‡â€æ—¶ï¼Œè¿™ä¸ä»…æ˜¯ä¸€ä¸ªèŠå¤©ï¼Œä½ éœ€è¦è°ƒç”¨å·¥ä½œæµ `prose_collection_flow`ã€‚
    æ”¶å½•å®Œæˆåï¼Œå‘ç”¨æˆ·æ±‡æŠ¥ç»“æœã€‚
    ```
    
2. **å…³è”å·¥ä½œæµ**ï¼šç‚¹å‡» `+` å·ï¼ŒæŠŠä½ åˆšæ‰å‘å¸ƒçš„ `prose_collection_flow` æ·»åŠ è¿›æ¥ã€‚
    
3. **å‘å¸ƒ**ï¼šå‘å¸ƒåˆ°é£ä¹¦ã€å¾®ä¿¡æˆ–è€…ç›´æ¥ä½œä¸º API ä½¿ç”¨ã€‚
    

---

### ğŸ”„ ç¬¬å››æ­¥ï¼šé—­ç¯ (å¦‚ä½•å›åˆ°ä½ çš„ NAS)

è¿™æ˜¯ä½ åœ¨ Coze æ–¹æ¡ˆä¸­å”¯ä¸€éœ€è¦æ‰‹åŠ¨åœ¨æœ¬åœ°é…ç½®çš„ä¸€æ¬¡ï¼š

1. åœ¨ä½ çš„ NAS ä¸Šçš„ **Obsidian** é‡Œå®‰è£… **Obsidian Git** æ’ä»¶ã€‚
    
2. é…ç½®å¥½ä½ çš„ GitHub ä»“åº“ï¼ˆå°±æ˜¯ Coze å†™å…¥çš„é‚£ä¸ªï¼‰ã€‚
    
3. åœ¨æ’ä»¶è®¾ç½®é‡Œï¼Œå¼€å¯ **"Pull updates on startup"** (å¯åŠ¨æ—¶æ‹‰å–) æˆ–è€…è®¾ç½® **"Auto pull interval"** (ä¾‹å¦‚æ¯ 60 åˆ†é’Ÿæ‹‰å–ä¸€æ¬¡)ã€‚
    

**æ•ˆæœ**ï¼š

1. ä½ æ—©ä¸Šä¸Šç­è·¯ä¸Šï¼Œåœ¨æ‰‹æœºä¸Šå¯¹ Coze è¯´ï¼šâ€œç»™å¥³å„¿æ”¶å½•ä¸¤ç¯‡å°å­¦ç¾æ–‡â€ã€‚
    
2. Coze åœ¨äº‘ç«¯è·‘å®Œ Workflowï¼Œæ¨é€åˆ° GitHubã€‚
    
3. ä½ å›å®¶çš„è·¯ä¸Šï¼Œå®¶é‡Œçš„ NAS è‡ªåŠ¨ä» GitHub æ‹‰å–äº†æ›´æ–°ã€‚
    
4. æ™šä¸Šæ‰“å¼€ Obsidianï¼Œæ–‡ç« å·²ç»é™é™åœ°èººåœ¨æ–‡ä»¶å¤¹é‡Œäº†ã€‚
    

### âš–ï¸ Coze vs n8n æ–¹æ¡ˆå¯¹æ¯”

|**ç‰¹æ€§**|**n8n (æœ¬åœ° Docker)**|**Coze (äº‘ç«¯ Agent)**|
|---|---|---|
|**æ•°æ®éšç§**|â­â­â­â­â­ (å®Œå…¨æœ¬åœ°)|â­â­â­ (å­˜åœ¨ GitHub ç§æœ‰åº“)|
|**é…ç½®éš¾åº¦**|ğŸ›‘ é«˜ (éœ€é…ç¯å¢ƒã€ç½‘ç»œ)|âœ… ä½ (æ‹–æ‹½ã€æ— éœ€é…ç¯å¢ƒ)|
|**AI èƒ½åŠ›**|å–å†³äºä½ è°ƒç”¨çš„ API|é›†æˆåº¦é«˜ï¼Œä¸Šä¸‹æ–‡ç†è§£å¼º|
|**è´¹ç”¨**|æœ¬åœ°è¿è¡Œå…è´¹ (ä»…ä»˜ Token)|å…è´¹é¢åº¦é«˜ (ç›®å‰ Coze å¾ˆå¤šæ¨¡å‹å…è´¹)|
|**ç¨³å®šæ€§**|ä¾èµ–å®¶é‡Œç½‘ç»œå’Œ NAS|æé«˜ (äº‘ç«¯è¿è¡Œ)|
|**æ–‡ä»¶æ“ä½œ**|**ç›´æ¥è¯»å†™ç¡¬ç›˜ (å¼º)**|**å¿…é¡»é€šè¿‡ GitHub ä¸­è½¬ (å¼±)**|

æˆ‘çš„å»ºè®®ï¼š

å¦‚æœä½ ä¸æƒ³æŠ˜è…¾ Docker ç½‘ç»œã€åå‘ä»£ç†å’Œ Python ç¯å¢ƒé…ç½®ï¼ŒCoze + GitHub æ˜¯æœ€å¿«è½åœ°çš„æ–¹æ¡ˆã€‚è™½ç„¶å¤šäº†ä¸€æ­¥ GitHub ä¸­è½¬ï¼Œä½†å¯¹äºæ–‡æœ¬æ–‡ä»¶æ¥è¯´ï¼Œè¿™åè€Œæ˜¯æ›´å®‰å…¨çš„å¤‡ä»½ç­–ç•¥ã€‚